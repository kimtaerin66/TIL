# JPA_CRUD

현재 프로젝트를 핸들링할 핸들러가없기때문에, java>main이외의

java>test에 작성.

java>main은 프로젝트의 실질적인 코드들이 들어감.


### 실습
1. java > test에 userRopository 패키지생성 > userRopository class생성
2. userRopository 클래스는 프로젝트에서 자동으로 만들어준 StudyApplicationTests상속받기

```java
package com.example.study.UserRepository;

import com.example.study.StudyApplicationTests;

public class UserRepositoryTest extends StudyApplicationTests {
}


```

3. 테스트할 기능 선언 (CRUD)/ Autowired

```java
   @Autowired
    public void create(){}
    public void read(){}
    public void update(){}
    public void delete(){}

```
repository를 이용해서 테스트할거기에 repository에 @Autowired 작성

@Autowired를 사용하지않으면, 직접 repository객체 모든 메소드에 생성하여 작성해야함

![image](https://user-images.githubusercontent.com/85108615/196071793-d6d3a4d9-d7ff-404d-baba-613d3aa722d7.png)


하지만 Autowired 어노테이션을 사용하면, 여러군데사용가능.

4. 기능작성

create에 user생성.
User는 repository와 다르게 매번 값이 달라지기에 Autowired사용하지않고 매번생성한다.

new User();하면 기본생성자없기에 user.java에 @NoArgsConstructor달아주기

![image](https://user-images.githubusercontent.com/85108615/196072488-9be2de36-ff3a-4696-a721-f4f5b175d28c.png)

이렇게 작성하면 빨간줄이뜨는데

그건 해당칼럼을 만들때 ai(auto increment 자동추가)에 체크를했기에

직접 값을 넣을 수 없어서이다. > 삭제

![image](https://user-images.githubusercontent.com/85108615/196072790-ea1d2bce-f0d8-489c-8b24-5ea176b2d974.png)

값을 다넣었다면,

repository.save(user) 이앞에 User타입을 붙여주는데,

User타입을 불러서 저장했기에 return도 User타입으로 하는것.

유저를 넘기고 데이터베이스에 저장된 새유저 리턴

```java
    public void create(){
       User user = new User();
       user.setAccount("김태린TEST");
       user.setEmail("kimtaerinTest@gmail.com");
       user.setPhoneNumber("010-1234-1234");
       user.setCreatedAt(LocalDateTime.now());
       user.setCreatedBy("김태린");

      User newUser =  userRepository.save(user);
    }
```

5. 실행
test이기에 @Test를 달고, 출력해보면 에러

properties에 publicKey달아주기

```java
# properties
spring.datasource.url=jdbc:mysql://localhost:3306/study?useSSL=false&useUnicode=true&serverTimezone=Asia/Seoul&allowPublicKeyRetrieval=true

```


