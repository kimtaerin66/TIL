# JPA 연관관계

한명의 USER가 여러개의 물건을 살때

![image](https://user-images.githubusercontent.com/85108615/196105526-449aaa82-516f-4736-8ccc-ffcde63c4090.png)


USER가 item_id를 갖게된다면, 한개의 물건밖에 살수없고,

또한 여러명의 user가 item을 살수있기때문에 한개의 유저id만 가질수는 없다.

즉 둘을 연결할수없기에 이 가운에에 새로운 테이블을 생성해 연결한다.

![image](https://user-images.githubusercontent.com/85108615/196105794-2c1a25c8-5558-4623-855a-cd22fa0ba0a6.png)


### ERD 만들기

1. mysql - database - Reverse Engineer 클릭

접속할 데이터베이스정보와, 계정 넣기.

study와 연결할것이니 study선택

![image](https://user-images.githubusercontent.com/85108615/196106624-8a847428-d7d9-4aca-bd06-85ddf73916b3.png)

finish까지 완료되면

![image](https://user-images.githubusercontent.com/85108615/196106742-91c4bb44-537c-4aa2-9ded-8a55955d14f3.png)

2. 왼쪽의 테이블추가 버튼클릭 

![image](https://user-images.githubusercontent.com/85108615/196107167-5d7a6be8-cc8c-4402-a3fe-0e6106882c6e.png)

새로생성된 테이블을 더블클릭하여, 칼럼을 추가한다.

![image](https://user-images.githubusercontent.com/85108615/196107419-3e9573af-7806-4290-a76c-177ffd619247.png)

### order_detail 테이블만들기

동일하게 테이블추가 아이콘클릭하여, order_detail을 만든다.

id와 order_at만 넣어주고, 

![image](https://user-images.githubusercontent.com/85108615/196108525-6ef2c0de-1fdb-4be6-b3f3-a97d144d917f.png)

순서를 맞춰 자리잡아준다.

![image](https://user-images.githubusercontent.com/85108615/196108578-aafd85a7-cc3d-4896-8c78-9e349540a260.png)

그리고 메뉴봐의 실선과 점선을 이용하는데

실선은 양쪽이 기본키를 가질때, 점선은 한쪽이 가질때

user와 order_detail은 1:N이니까 1:n점선으로 order_detail찍고 user찍어주기

![image](https://user-images.githubusercontent.com/85108615/196109079-c397969f-b1f7-4b61-83a8-5460686c5cb2.png)


마찬가지로 order_detail찍고 item찍기

![image](https://user-images.githubusercontent.com/85108615/196109222-2de58b2a-2e17-4fa3-8f77-1b976af72098.png)


### ERD를 테이블로 만들기

반대로  mysql - database - forward Engineer 클릭

select할 테이블 선택후 재접속 또는 새로고침하면 만든 테이블들이 생성된다.



