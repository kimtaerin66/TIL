## Babel 이란?

프론트엔드 코드가 브라우저마다 달라, 사용이 불편했는데,
이를 해결하고 모든 브라우저에서 동작하도록 변환해주는 역할을 한다.

(바벨은 최신 자바스크립트 코드를 구버전의 브라우저나 인터넷 익스플로러가 이해할수있도록
바꿔주는것이 주된 역할)

이 변환 작업을 "트랜스파일" 이라한다.

## Babel 사용법 

설치
```node
npm install -D @babel/core @babel/cli
```
babel을 설치하고나면, node-modules > bin 폴더에 babel을 실행할수있는 명령이생긴다.

바벨은 3단계로 빌드를 진행한다.

1. 파싱(토큰마다 분리)
2. 변환
3. 출력

```js
//app.js

const alert = msg => window.alert(msg);
```

```node
npx babel app.js

//const alert = msg => window.alert(msg); 출력
```

app.js를 babel로 실행해보면, 그대로 출력만 한다.

그 가운데 변환 작업은 다른 "플러그인"이 진행하기때문이다.

## 커스텀 플러그인

커스텀 플러그인을 만들어, babel과 플러그인의 동작원리를 알아보자.

(출처: 바벨 홈페이지의 예제 코드, 프론트엔드 개발환경의 이해 온라인강의)

```js
//myplugin.js
module.exports = function myplugin() {
  return {
    visitor: {
      Identifier(path) {
        const name = path.node.name

        // 바벨이 만든 AST 노드를 출력한다
        console.log("Identifier() name:", name)

        // 변환작업: 코드 문자열을 역순으로 변환한다
        path.node.name = name.split("").reverse().join("")
      },
    },
  }
}

```
이 플러그인을 실행해보자.

```node
npx babel app.js --plugins ./myplugin.js
```
```
Identifier() name: alert
Identifier() name: msg
Identifier() name: window
Identifier() name: alert
Identifier() name: msg

const trela = gsm => wodniw.trela(gsm);
```

이 플러그인을 살펴보면, Identifier로 들어오는 path인자로, 코드에 접근해

내가 원하는 형태로 바꿀수가있다.

이런 원리를 이용해, const를 이해하지못하는 구 브라우저를 위해 const를 var로 변경하는 플러그인을 만들어보자.




